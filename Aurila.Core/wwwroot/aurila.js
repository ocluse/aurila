var l=class{constructor(e,t,i,r){this.isThrottled=!1;this.triedScrollWhileThrottled=!1;this.timeoutId=null;this.element=e,this.dotNetObjRef=t,this.throttleMilliseconds=i,this.orientation=r,this.boundScrollHandler=this.handleScroll.bind(this),this.setElement(e)}setElement(e){this.element&&this.element.removeEventListener("scroll",this.boundScrollHandler),this.element=e,this.element&&this.element.addEventListener("scroll",this.boundScrollHandler)}handleScroll(){if(this.isThrottled){this.triedScrollWhileThrottled=!0;return}this.isThrottled=!0,this.notifyScrollChanged(),this.timeoutId=window.setTimeout(()=>{this.isThrottled=!1,this.triedScrollWhileThrottled&&(this.triedScrollWhileThrottled=!1,this.notifyScrollChanged())},this.throttleMilliseconds)}notifyScrollChanged(){if(!this.element||!this.dotNetObjRef)return;let e={scrollTop:this.element.scrollTop,scrollLeft:this.element.scrollLeft,scrollHeight:this.element.scrollHeight,scrollWidth:this.element.scrollWidth,clientHeight:this.element.clientHeight,clientWidth:this.element.clientWidth};this.dotNetObjRef.invokeMethodAsync("HandleScrollFromJS",e).catch(t=>{console.error("Error invoking C# scroll handler:",t)})}scrollToPosition(e){this.element&&(this.orientation==="Vertical"?this.element.scrollTop=e:this.element.scrollLeft=e,this.notifyScrollChanged())}scrollToEnd(e){this.element&&(e?this.element.scrollTop=this.element.scrollHeight-this.element.clientHeight:this.element.scrollLeft=this.element.scrollWidth-this.element.clientWidth,this.notifyScrollChanged())}scrollToStart(e){this.element&&(e?this.element.scrollTop=0:this.element.scrollLeft=0,this.notifyScrollChanged())}dispose(){this.element&&this.element.removeEventListener("scroll",this.boundScrollHandler),this.timeoutId!==null&&clearTimeout(this.timeoutId),this.element=null,this.dotNetObjRef=null}};var o=class{constructor(e,t){this.element=e,this.maxLines=t,this.boundAdjustHeight=this.adjustHeight.bind(this),this.element.addEventListener("input",this.boundAdjustHeight)}adjustHeight(){if(!this.element)return;let e=this.getLineHeight()*this.maxLines;this.element.style.height="auto";let t=Math.min(this.element.scrollHeight,e);this.element.style.height=`${t}px`,this.element.style.overflowY=t>=e?"auto":"hidden"}setMaxLines(e){this.maxLines=e,this.adjustHeight()}getLineHeight(){if(!this.element)return 24;let e=getComputedStyle(this.element);return parseFloat(e.lineHeight)||24}dispose(){this.element&&(this.element.removeEventListener("input",this.boundAdjustHeight),this.element=null)}};var s=class{constructor(e,t){this.contentElement=null;this.parentElement=null;this.peekElement=null;this.startY=0;this.isRefreshing=!1;this.threshold=50;this.timeThreshold=300;this.startTime=0;this.dotNetObj=t,this.boundTouchStart=this.handleTouchStart.bind(this),this.boundTouchMove=this.handleTouchMove.bind(this),this.boundTouchEnd=this.handleTouchEnd.bind(this),this.setElement(e)}handleTouchStart(e){if(!this.contentElement)return;this.contentElement.scrollTop===0&&(this.startY=e.touches[0].pageY,this.startTime=Date.now())}handleTouchMove(e){if(!this.contentElement||!this.parentElement||!this.startY||this.isRefreshing)return;let i=e.touches[0].pageY-this.startY,r=this.contentElement.scrollTop;if(i>0&&r===0){let h=Math.min(i,this.threshold),c=Math.min(i/this.threshold,1);this.parentElement.style.setProperty("--pull-distance",`${h}px`),this.parentElement.style.setProperty("--pull-progress",`${c}`),e.preventDefault()}}handleTouchEnd(e){if(!this.startY||this.isRefreshing||!this.parentElement)return;let t=e.changedTouches[0].pageY-this.startY,i=Date.now()-this.startTime;this.parentElement.style.setProperty("--pull-distance","0px"),this.parentElement.style.setProperty("--pull-progress","0"),t>this.threshold&&i>=this.timeThreshold&&(this.isRefreshing=!0,this.dotNetObj.invokeMethodAsync("HandleRefresh").finally(()=>{this.isRefreshing=!1})),this.startY=0}setElement(e){if(this.contentElement!==e&&(this.dispose(),this.contentElement=e,this.parentElement=e.parentElement,this.contentElement&&(this.parentElement?.style.setProperty("--pull-distance","0px"),this.parentElement?.style.setProperty("--pull-progress","0"),this.contentElement.addEventListener("touchstart",this.boundTouchStart),this.contentElement.addEventListener("touchmove",this.boundTouchMove),this.contentElement.addEventListener("touchend",this.boundTouchEnd)),this.peekElement=this.contentElement.previousElementSibling,this.peekElement)){let t=this.peekElement.offsetHeight;t>this.threshold&&(this.threshold=t)}}dispose(){this.contentElement&&(this.contentElement.removeEventListener("touchstart",this.boundTouchStart),this.contentElement.removeEventListener("touchmove",this.boundTouchMove),this.contentElement.removeEventListener("touchend",this.boundTouchEnd),this.contentElement.style.transform="",this.contentElement.style.transition=""),this.isRefreshing=!1,this.startY=0}};function b(n,e,t,i){return new l(n,e,t,i)}function g(n,e){return new s(n,e)}function H(n,e){return new o(n,e)}export{g as createPullToRefreshBox,b as createScrollBox,H as createTextField};
//# sourceMappingURL=aurila.js.map
